/* ------------------------------------ *\
  Floating Action Buttons
\* ------------------------------------ */

@import '@bolt/core-v3.x';

// Register Custom Block Element
@include bolt-custom-element('bolt-floating-action-buttons', block, medium);

$_bolt-fab-x-offset: var(--bolt-spacing-x-xsmall);
$_bolt-fab-y-offset: var(--bolt-spacing-y-xsmall);

.c-bolt-floating-action-buttons {
  z-index: bolt-z-index('fab');
  transition: opacity var(--bolt-transition);

  // must both be ready && not have c-bolt-floating-action-buttons--hidden class before showing
  &:not([data-bolt-ready]),
  &.c-bolt-floating-action-buttons--hidden {
    visibility: hidden;
    opacity: 0;
  }

  &__list {
    margin-bottom: 0;
    margin-left: 0;
  }

  &__list-item {
    display: flex;
    flex-direction: column-reverse;
    position: relative;
    margin-bottom: var(--bolt-spacing-y-xxsmall);
    // transition: all var(--bolt-transition);
  }

  .c-bolt-floating-action-buttons__list-item--has-children .e-bolt-button {
    span {
      // transition: all var(--bolt-transition);
    }
  }

  // Hide secondary list and toggle close icon
  .c-bolt-floating-action-buttons__list-item--has-children {
    .e-bolt-button[aria-expanded='false'] {
      > span:nth-child(2) {
        visibility: hidden;
        opacity: 0;
      }
    }

    .c-bolt-floating-action-buttons__list--hidden .c-bolt-floating-action-buttons__list-item {
      display: none;
      // visibility: hidden;
      // opacity: 0;
      // margin-bottom: -100%;
    }
  }

  // change toggle icon
  .c-bolt-floating-action-buttons__list-item--has-children
    .e-bolt-button[aria-expanded='true'] {
    > span:nth-child(1) {
      visibility: hidden;
      opacity: 0;
    }

    > span:nth-child(2) {
      visibility: visible;
      opacity: 1;
    }
  }
}

// placement prop
$_bolt-fab-placement: 'right-end', 'right', 'right-start';

@each $placement in $_bolt-fab-placement {
  .c-bolt-floating-action-buttons--placement-#{$placement} {
    position: fixed;
    right: var(--c-bolt-floating-action-buttons-offset-x, $_bolt-fab-x-offset);

    @if index($placement, 'right') {
      top: calc(50% + var(--c-bolt-floating-action-buttons-offset-y));
      transform: translateY(-50%);
    } @else if index($placement, 'right-top') {
      top: var(--c-bolt-floating-action-buttons-offset-y, $_bolt-fab-y-offset);
    } @else {
      bottom: var(
        --c-bolt-floating-action-buttons-offset-y,
        $_bolt-fab-y-offset
      );
    }
  }
}
