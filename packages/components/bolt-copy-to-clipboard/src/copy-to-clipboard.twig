{% set schema = bolt.data.components['@bolt-components-copy-to-clipboard'].schema %}

{% if enable_json_schema_validation %}
  {{ validate_data_schema(schema, _self)|raw }}
{% endif %}

{# Variables #}
{% set this = init(schema) %}
{% set attributes = create_attribute(attributes|default({})) %}
{% set inner_attributes = create_attribute({}) %}

{% set classes = [
  'c-bolt-copy-to-clipboard',
  'js-bolt-copy-to-clipboard',
] %}

{% set default_trigger %}
  <div class="c-bolt-copy-to-clipboard__action">
    {% include '@bolt-elements-icon/icon.twig' with {
      name: 'link',
    } only %}
    <span class="c-bolt-copy-to-clipboard__action-text">
      {{ this.data.trigger_text.value }}
    </span>
  </div>
{% endset %}

{% set default_transition %}
  <span class="c-bolt-copy-to-clipboard__transition-animation">
    {% include '@bolt-elements-icon/icon.twig' with {
      name: 'refresh',
    } only %}
  </span>
{% endset %}

{% set default_confirmation %}
  <div class="c-bolt-copy-to-clipboard__info js-bolt-copy-to-clipboard__trigger">
    {% include '@bolt-elements-icon/icon.twig' with {
      name: 'check',
    } only %}
  </div>
{% endset %}

{# Copy to clipboard component's custom element wrapper. #}
<bolt-copy-to-clipboard {{ attributes }}>
  <span {{ inner_attributes.addClass(classes) }}>
    <button class="c-bolt-copy-to-clipboard__trigger" data-clipboard-text="{{ this.data.text_to_copy.value }}">
      {{ custom_trigger|default(default_trigger) }}
    </button>

    <span class="c-bolt-copy-to-clipboard__transition">
      {{ custom_transition|default(default_transition) }}
    </span>

    <span class="c-bolt-copy-to-clipboard__confirmation">
      {{ custom_confirmation|default(default_confirmation) }}
    </span>
  </span>
</bolt-copy-to-clipboard>
