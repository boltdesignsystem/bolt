{% set colors = [
  "silver",
  "black"
] %}

{% set orientations = [
  "portrait",
  "landscape"
] %}

{% set prefix = "c-bolt-" %}
{% set color = color | default("black") %}
{% set orientation = orientation | default("portrait") %}

{% set attributes = create_attribute(attributes|default({})) %}

{# Defaults for a vanilla `Button` component #}
{% set componentName = "device-viewer" %}
{% set baseClass = prefix ~ componentName %}

{% set classes = [
  baseClass,
  "marvel-device",
  "ipad",
  color in colors ? baseClass ~ "--" ~ color : "",
  orientation in orientations ? baseClass ~ "--" ~ orientation : ""
] %}

<div {{ attributes.addClass(classes | raw) }}>
  {% include "@bolt-components-device-viewer/parts/_camera.twig" only %}
  <div class="screen">
    {% if image %}
      {% if image.src %}
        {% set _image_attributes = image.attributes|default({}) %}
        {% set _image_attributes = _image_attributes|merge({
          src: image.src,
          alt: image.alt,
          srcset: image.srcset,
          sizes: image.sizes,
        }) %}

        {% if image.lazyload == true %}
          {% set _image_attributes = _image_attributes|merge({loading: 'lazy'}) %}
        {% endif %}

        {% if no_lazy == true %}
          {% set _image_attributes = _image_attributes|merge({loading: 'eager'}) %}
        {% endif %}

        {% if image.max_width %}
          {% set _image_attributes = _image_attributes|merge({
            style: 'max-width: ' ~ image.max_width ~ ';'
          }) %}
        {% endif %}

        {% set _image_props = { attributes: _image_attributes } %}

        {% if image.max_width %}
          {% set _image_props = _image_props|merge({fill: true}) %}
        {% endif %}

        {% if image.cover %}
          {% set _image_props = _image_props|merge({background: true}) %}
        {% endif %}
      {% else %}
        {% set _image_props = image %}
      {% endif %}

      {% include "@bolt-elements-image/image.twig" with _image_props only %}
    {% endif %}
  </div>
  {% include "@bolt-components-device-viewer/parts/_home.twig" only %}
</div>
