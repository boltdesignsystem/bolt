{% set schema = bolt.data.components['@bolt-components-background'].schema %}

{% if enable_json_schema_validation %}
  {{ validate_data_schema(schema, _self)|raw }}
{% endif %}

{# Variables #}
{% set this = init(schema) %}
{% set attributes = create_attribute(attributes|default({})) %}

<bolt-background bolt-component>
  <div {{ attributes.addClass(['c-bolt-background']) }}>
    {% if items %}
      {% for item in items %}
        {% if item is iterable and item.pattern %}
          {# DEPRECATED.  pattern_template() should no longer be used to render each item. #}
          {% include '@bolt-components-background/background-item.twig' %}
        {% else %}
          {% if this.data.video.value %}
            <div class="c-bolt-background__item--video">
              {{ item }}
            </div>
          {% else %}
            <div class="c-bolt-background__item">
              {{ item }}
            </div>
          {% endif %}
        {% endif %}
      {% endfor %}
    {% endif %}

    {% if this.data.opacity.value != 'none' or this.data.shape_group.value != 'none' %}
      <div class="{{ 'c-bolt-background__item' }}">
        {% if this.data.opacity.value != 'none'  %}
          {% include '@bolt-components-background/background-overlay.twig' %}
        {% endif %}

        {% if this.data.shape_group.value != 'none' %}
          {% include '@bolt-components-background/background-shapes-wrapper.twig' %}
        {% endif %}
      </div>
    {% endif %}
  </div>
</bolt-background>
