{% set schema = get_data('@bolt/button.schema.json') %}

{# Defaults for a vanilla `Button` component #}
{% set prefix = "c-bolt-" %}
{% set componentName = "button" %}
{% set baseClass = prefix ~ componentName %}
{% set attributes = create_attribute(attributes|default({})) %}



{% set alignOptions = schema.properties.align.enum %}
{% set roundedOptions = schema.properties.rounded.enum %}
{% set sizeOptions = schema.properties.size.enum %}
{% set styleOptions = schema.properties.style.enum %}
{% set tagOptions = schema.properties.tag.enum %}
{% set widthOptions = schema.properties.width.enum %}


{% set align = align in alignOptions ? align : schema.properties.align.default %}
{% set rounded = rounded in roundedOptions ? rounded : schema.properties.rounded.default %}
{% set size = size in sizeOptions ? size : schema.properties.size.default %}
{% set style = style in styleOptions ? style : schema.properties.style.default %}
{% set tag = tag in tagOptions ? tag : schema.properties.tag.default %}
{% set width = width in widthOptions ? width : schema.properties.width.default %}


{% if tag == "submit" %}
  {% set tag = "button" %}
  {% set attributes = attributes.setAttribute("type", "submit") %}
{% elseif tag == "link" or tag == "a" %}
  {% set tag = "a" %}
  {% if url %}
    {% set attributes = attributes.setAttribute("href", url) %}
  {% endif %}
{% elseif tag == "reset" %}
  {% set tag = "button" %}
  {% set attributes = attributes.setAttribute("type", "reset") %}
{% endif %}



{% set classes = [
  baseClass,
  disabled ? baseClass ~ "--disabled" : "",
  size in sizeOptions ? baseClass ~ "--" ~ size : "",
  width in widthOptions and width != "" ? baseClass ~ "--" ~ width : "",
  rounded in roundedOptions and rounded != schema.properties.rounded.default ? baseClass ~ "--" ~ rounded : "",
  style in styleOptions ? baseClass ~ "--" ~ style : "",
  align in alignOptions ? baseClass ~ "--" ~ align : "",
] %}

{% if disabled %}
  {% set attributes = attributes.setAttribute("disabled", true) %}
{% endif %}


{# set iconpos = iconpos | default("right") #}

<bolt-button
  {% if align %} align="{{ align }}" {% endif %}
  {% if style %} color="{{ style }}" {% endif %}
  {% if size %} size="{{ size }}" {% endif %}
  {% if url %} url="{{ url }}" {% endif %}
  {% if width %} width="{{ width }}" {% endif %}
  {% if rounded %} rounded=" {{ rounded }}" {% endif %}
  {% if iconOnly %} icon-only="true" {% endif %}
  {% if disabled == true %} disabled {% endif %}
>
  <{{ tag }} {{ attributes.addClass(classes).addClass('js-bolt-pre-rendered') }}>
    {{ text }}
    {# <span class="{{ "#{baseClass}__text" }} {% if iconOnly %}u-bolt-visuallyhidden{% endif %}">

    </span> #}


    {% if icon %}
      <span class="{{ "#{baseClass}__icon" }} {% if iconOnly %}u-bolt-margin-left-none {% endif %}">
        {% include "@bolt/icon.twig" with icon only %}
      </span>
    {% endif %}
  </{{ tag }}>
</bolt-button>
