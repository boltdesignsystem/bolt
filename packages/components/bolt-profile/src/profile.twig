{% set schema = bolt.data.components['@bolt-components-profile'].schema %}
{% if enable_json_schema_validation %}
  {{ validate_data_schema(schema, _self)|raw }}
{% endif %}

{# Variables #}
{% set this = init(schema) %}
{% set attributes = create_attribute(attributes|default({})) %}

{# Array of classes based on the defined + default props #}
{% set classes = [
  'c-bolt-profile',
  this.data.full_bleed.value ? 'c-bolt-profile--full-bleed' : '',
] %}

<div {{ attributes.addClass(classes) }}>
  <div class="c-bolt-profile__cover">
    {% if cover %}
      {{ cover }}
    {% else %}
      {% include '@bolt-elements-image/image.twig' with {
        background: true,
        attributes: {
          src: '/images/backgrounds/navy-light-circles.jpg',
          sizes: '100vw',
          width: 2560,
          height: 2560,
          loading: 'eager',
        },
      } only %}
    {% endif %}
  </div>
  <div class="c-bolt-profile__avatar">
    {% if avatar %}
      {{ avatar }}
    {% else %}
      <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg"><path d="m450 398.32c-41.11-48-92.49-77.33-155.45-88.88 35.52-18.24 57.86-45.7 62.39-85s-9.7-72-40.76-96.63c-46.91-37.19-117.18-25.81-151.61 23.46-34.75 49.67-22.45 125.53 44.2 158.24-30.77 5.63-59.25 15.3-85.67 30.49a255.37 255.37 0 0 0 -69.48 58.26c-61.89-78.26-75.62-216.47 17.11-316.44 89.95-96.95 242.27-106.66 344.33-16.89 98.08 86.23 110.86 231.6 34.94 333.39z" fill="var(--m-bolt-text-on-disabled)"/><g fill="var(--m-bolt-disabled)"><path d="m442.17 407.77c-94.44 118.39-282.52 121.89-380.88.38 88.1-113.4 277.05-126.38 380.88-.38z"/><path d="m345.69 211.49c-.36 52.58-42.88 95-94.65 94.52-51.55-.52-94-43.31-93.51-94.17.57-53.33 43-95.3 96.46-94.12 52.65 1.17 91.87 44.79 91.7 93.77z"/></g></svg>
    {% endif %}
  </div>
  <div class="c-bolt-profile__user-info">
    <div class="c-bolt-profile__user-headline">
      <h1><strong>{{ first_name }} {{ last_name }}</strong> (@{{ username }})</h1>
    </div>
    {% if chips %}
      <div class="c-bolt-profile__user-chips">
        {{ chips }}
      </div>
    {% endif %}
    <div class="c-bolt-profile__user-meta">
      {{ job_title }}
      <br>
      {% include '@bolt-elements-icon/icon.twig' with {
        name: 'map-pin-solid',
      } only %}
      {{ location }}
    </div>
  </div>
  {% if actions %}
    <div class="c-bolt-profile__actions">
      {{ actions }}
    </div>
  {% endif %}
  {% if stats or message %}
    <div class="c-bolt-profile__stats">
      {% if message %}
        {% set _message_attributes = create_attribute(message.attributes|default({})) %}
        {% set _message_tag = _message_attributes.type ? 'button' : _message_attributes.href ? 'a' : 'span' %}
        <{{ _message_tag }} {{ _message_attributes.addClass('c-bolt-profile__stats-item') }}>
          <span class="c-bolt-profile__stats-signifier">
            {% include '@bolt-elements-icon/icon.twig' with {
              name: 'customer-service',
            } only %}
          </span>
          <span class="c-bolt-profile__stats-label">{{ message.label }}</span>
        </{{ _message_tag }}>
      {% endif %}
      {% if stats %}
        {% for item in stats %}
          {% set _item_attributes = create_attribute(item.attributes|default({})) %}
          {% set _item_tag = _item_attributes.type ? 'button' : _item_attributes.href ? 'a' : 'span' %}
          <{{ _item_tag }} {{ _item_attributes.addClass('c-bolt-profile__stats-item') }}>
            <span class="c-bolt-profile__stats-signifier">{{ item.number }}</span>
            <span class="c-bolt-profile__stats-label">{{ item.label }}</span>
          </{{ _item_tag }}>
        {% endfor %}
      {% endif %}
    </div>
  {% endif %}
</div>
