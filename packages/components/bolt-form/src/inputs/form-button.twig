{#
/**
 * @file
 * A form button element.
 *
 * This is designed to work just like <bolt-button> except that:
 *    a) It accepts fewer parameters.  The underlying assumption is that you really
 *       shouldn't need many options for a form submit button.
 *    b) It is not rendered using javascript.  That ensures that Bolt javascript cannot
 *       interfere with anything the consuming end wants to do with its forms.
 *
 * Available variables
 *   - attributes (object): A list of HTML attributes for the button element.
 *   - text (renderable, REQUIRED): Text to show within the button
 *   - width (enum): One of "full", "full@small", or "" (empty string)
 *   - icon (object): data as expected by the bolt-icon component.
 */
#}

{% set _button_attributes = attributes|default({}) %}

{% set _button_attributes = _button_attributes|merge({ type: 'button' }) %}

{% set _button_props = {
  content: text,
  attributes: _button_attributes,
} %}

{% if width is not empty %}
  {% if width == 'full' %}
    {% set _display = 'block' %}
  {% elseif width == 'full@small' %}
    {% set _display = 'inline@from-small' %}
  {% endif %}

  {% set _button_props = _button_props|merge({ display: _display }) %}
{% endif %}


{% if icon %}
  {% set _icon_rendered %}
    {% include '@bolt-elements-icon/icon.twig' with icon only %}
  {% endset %}

  {% set _button_props = _button_props|merge({ icon_before: _icon_rendered }) %}
{% endif %}

{% include '@bolt-elements-button/button.twig' with _button_props only %}
