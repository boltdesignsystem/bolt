{% set schema = bolt.data.components['@bolt-elements-ratio'].schema %}

{% set description %}
  Aspect ratio is most commonly expressed as two integers and a division sign: width / height. The browser will calculate the aspect ratio and for example <code>ratio: 4/3</code> will result in 1.33.
{% endset %}

{% set notes %}
  <bolt-ol>
    <bolt-li>Reference the <a href="{{ link['viewall-elements-ratio'] }}?selected-tab=schema" class="e-bolt-text-link">schema</a> for all options.</bolt-li>
    <bolt-li>Additionally, a CSS custom property is available to change the aspect ratio to any. Define <code>--e-bolt-aspect-ratio</code> inline style rule to set the desired aspect ratio.</bolt-li>
    <bolt-li>To measure the aspect ratio, we need to divide the width by the height. For example an image 400x300 and image 260x195 have the same ratio 1.33. That means this ratio should be respected.</bolt-li>
    <bolt-li>The nearest normal aspect ratio should be find. In other words, while 649x360 technically has an aspect ratio of 649/360, itâ€™s often useful to know that the nearest normal aspect ratio is actually 9/5 (648x360). You can <a href="http://lawlesscreation.github.io/nearest-aspect-ratio/" target="_blank" rel="noopener" class="e-bolt-text-link">calculate the Nearest Normal Aspect Ratio</a>. Useful for when images are odd dimensions.</bolt-li>
    <bolt-li>Setting different aspect ratio than the one resulting from the calculations (width divided by height) causes <a href="{{ link['elements-ratio-nearest-normal-aspect-ratio'] }}" class="e-bolt-text-link">cropping the image</a>.</bolt-li>
    <bolt-li>Ratio element width will adapt to its parent container width. Or we can set the width directly to the ratio element using attributes object, for example: <code>attributes: { style: 'max-width: 150px' }</code></bolt-li>
    <bolt-li>A great feature of <code>aspect-ratio</code> is that it can create placeholder space to prevent <a href="https://web.dev/cls/" target="_blank" rel="noopener" class="e-bolt-text-link">Cumulative Layout Shift</a> and deliver better Web Vitals.</bolt-li>
  </bolt-ol>
{% endset %}

{% set image_attrs = [
  {
    url_chunk: '400x300',
    image_dimensions: {
      width: '400',
      height: '300'
    },
  },
  {
    url_chunk: '500x500',
    image_dimensions: {
      width: '500',
      height: '500'
    },
  },
  {
    url_chunk: '1600x900',
    image_dimensions: {
      width: '1600',
      height: '900'
    },
  },
  {
    url_chunk: '2100x900',
    image_dimensions: {
      width: '2100',
      height: '900'
    },
  },
] %}

{% set image_elements = [] %}
{% for attr in image_attrs %}
  {% set image %}
    {% include '@bolt-elements-image/image.twig' with {
      attributes: {
        alt: 'Alt text.',
        src: 'https://via.placeholder.com/' ~ attr.url_chunk,
        width: attr.image_dimensions.width,
        height: attr.image_dimensions.height
      },
    } only %}
  {% endset %}
  {% set image_elements = image_elements|merge([image]) %}
{% endfor %}

{% set demo %}
  {% set ratio_elements = [] %}
  {% for ratio in schema.properties.ratio.enum %}
    {% set ratio_single_element %}
      {% if ratio == 'standard' %}
        {% set aspect_ratio = '4/3 = 1.33' %}
      {% elseif ratio == 'square' %}
        {% set aspect_ratio = '1/1 = 1' %}
      {% elseif ratio == 'rectangle'%}
        {% set aspect_ratio = '16/9 = 1.77' %}
      {% endif %}
      <bolt-text>The ratio is set to <strong>"{{ ratio }}"</strong>. The aspect-ratio is <strong>{{ aspect_ratio }}</strong>.</bolt-text>
      {% include '@bolt-elements-ratio/ratio.twig' with {
        children: image_elements[loop.index0],
        ratio: ratio,
      } only %}
    {% endset %}
    {% set ratio_elements = ratio_elements|merge([ratio_single_element]) %}
  {% endfor %}
  {% set custom_aspect_ratio %}
    <bolt-text>The ratio is <strong>custom</strong> set with an inline style. The aspect-ratio is <strong>7/3 = 2.33</strong></bolt-text>
    {% include '@bolt-elements-ratio/ratio.twig' with {
      children: image_elements[3],
      attributes: {
        style: [
          '--e-bolt-aspect-ratio: 7/3;'
        ]
      }
    } only %}
  {% endset %}
  {% include '@bolt-components-grid/grid.twig' with {
    gutter: 'small',
    items: [
      {
        column_start: '1',
        column_span: '12 6@medium',
        content: ratio_elements[0],
      },
      {
        column_start: '1 7@medium',
        column_span: '12 6@medium',
        content: ratio_elements[1],
      },
      {
        column_start: '1',
        column_span: '12 6@medium',
        content: ratio_elements[2],
      },
      {
        column_start: '1 7@medium',
        column_span: '12 6@medium',
        content: custom_aspect_ratio,
      },
    ]
  } only %}
{% endset %}

{% set twig_markup %}{% verbatim %}
{% include '@bolt-elements-ratio/ratio.twig' with {
  children: // image or video goes here,
  ratio: 'standard'
} only %}
{% endverbatim %}{% endset %}

{% set html_markup %}
{% verbatim %}
<div class="e-bolt-ratio e-bolt-ratio--standard">
  <!-- image or video goes here -->
</div>
{% endverbatim %}
{% endset %}

{% include '@utils/pattern-doc-page.twig' with {
  title: 'Basic Ratio',
  description: description,
  notes: notes,
  demo: demo,
  twig_markup: twig_markup,
  html_markup: html_markup
} only %}
