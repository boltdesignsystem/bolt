
{% extends "@pl/_default-page-template.twig" %}

{% set header %}
  <header class="c-ntm__header">
    {% include '@bolt-components-headline/headline.twig' with {
      size: 'xxxlarge',
      text: 'Pega Tag set builder'
    } only %}
    <div class="c-ntm__header-steps">
      {% include '@bolt-components-progress-bar/progress-bar.twig' with {
        value: 3,
        valueFormat: 'step',
        max: 4,
      } only %}
    </div>
  </header>
{% endset %}

{% set step_heading_inner %}
  {% include '@bolt-components-headline/text.twig' with {
    size: 'large',
    text: 'How do you want to be notified?',
    tag: 'span'
  } only %}
{% endset %}

{% set step_heading %}
  {% include '@bolt-components-headline/headline.twig' with {
    size: 'xlarge',
    text: 'Step 3:' ~ step_heading_inner,
    attributes: {
      class: 'c-ntm__builder-title u-bolt-margin-bottom-large'
    }
  } only %}
{% endset %}

{% set frame_title %}
  {% include '@bolt-components-headline/headline.twig' with {
    size: 'small',
    text: 'Your current tag set',
    transform: 'uppercase'
  } only %}
{% endset %}

{% set chip_1 %}
  {% include '@bolt-components-chip/chip.twig' with {
    text: 'Question',
    size: 'xsmall',
    color: 'navy'
  } only %}
{% endset %}

{% set chip_2 %}
  {% include '@bolt-components-chip/chip.twig' with {
    text: 'Discussion',
    size: 'xsmall',
    color: 'navy'
  } only %}
{% endset %}

{% set chip_3 %}
  {% include '@bolt-components-chip/chip.twig' with {
    text: 'Pega Customer Services 8.6',
    size: 'xsmall',
    color: 'navy'
  } only %}
{% endset %}

{% set chip_4 %}
  {% include '@bolt-components-chip/chip.twig' with {
    text: 'Mobile',
    size: 'xsmall',
    color: 'navy'
  } only %}
{% endset %}

{% set frame %}
  {% include '@bolt-components-headline/text.twig' with {
    size: 'small',
    text: 'Notify me when' ~ chip_1 ~ ' or ' ~ chip_2 ~ ' tagged with ' ~ chip_3 ~ ' and ' ~ chip_4 ~ ' is published or updated.',
    attributes: {
      class: 'c-ntm__frame'
    }
  } only %}
{% endset %}

{% set notification_1 %}
  {% include '@bolt-components-headline/headline.twig' with {
    text: 'Notification feed',
    icon: {
      name: 'bell-solid',
      position: 'before'
    }
  } only %}
  {% include '@bolt-components-headline/text.twig' with {
    text: 'Ecosystem real time alerts that appear in your notifications feed',
  } only %}
{% endset %}

{% set notification_2 %}
  {% include '@bolt-components-headline/headline.twig' with {
    text: 'Email',
    icon: {
      name: 'email',
      position: 'before'
    }
  } only %}
  {% include '@bolt-components-headline/text.twig' with {
    text: 'A weekly digest compiling all your favourite content chosen above',
  } only %}
{% endset %}

{% set switchers_buttons %}
  <div class="c-ntm__builder-inputs c-ntm__builder-inputs--step-three">
    {% include '@bolt-components-switch-button/switch-button.twig' with {
      label: notification_1,
      attributes: {
        class: 'js-target-the-switch-button-container'
      },
    } only %}

    {% include '@bolt-components-switch-button/switch-button.twig' with {
      label: notification_2,
      on: false,
      attributes: {
        class: 'js-target-the-switch-button-container'
      },
    } only %}
  </div>
{% endset %}

{% set text_link %}
  {% include '@bolt-elements-text-link/text-link.twig' with {
  content: 'Manage email subscriptions here',
  attributes: {
    href: 'https://google.com',
    target: '_blank',
    rel: 'noopener'
  }
} only %}
{% endset %}

{% set navigation %}
  <div class="c-ntm__nav">
    {% set icon_chevron_left %}
      {% include '@bolt-elements-icon/icon.twig' with {
        name: 'chevron-left',
      } only %}
    {% endset %}

    {% include '@bolt-elements-button/button.twig' with {
      content: 'Previous',
      attributes: {
        type: 'button',
      },
      icon_before: icon_chevron_left,
      border_radius: 'full',
    } only %}

    {% set icon_chevron_right %}
      {% include '@bolt-elements-icon/icon.twig' with {
        name: 'chevron-right',
      } only %}
    {% endset %}

    {% include '@bolt-elements-button/button.twig' with {
      content: 'Next',
      attributes: {
        type: 'button',
      },
      icon_after: icon_chevron_right,
      border_radius: 'full',
    } only %}
  </div>
{% endset %}

{% set footer %}
  <footer class="c-ntm__footer t-bolt-navy">
    {% include '@bolt-components-headline/text.twig' with {
      text: 'Want to know about new blogs, analyst reports, and press realases as they publish?' ~ text_link,
    } only %}
  </footer>
{% endset %}

{% set modal_content %}
  {{ header }}
  <div class="c-ntm__body">
    {{ frame_title }}
    {{ frame }}
    {{ step_heading }}
    <div class="c-ntm__builder c-ntm__builder--step-three">
      {{ switchers_buttons }}
    </div>
    {{ navigation }}
  </div>
  {{ footer }}
{% endset %}

{% set modal_trigger %}
  {% include '@bolt-elements-button/button.twig' with {
    content: 'Open Notification Tag Manager',
    size: 'large',
    attributes: {
      type: 'button',
      'data-bolt-modal-target': '.js-bolt-modal',
    },
  } only %}
{% endset %}

{% block main_content %}
  {% set header %}
    {% include '@bolt-components-headline/headline.twig' with {
      text: 'Notification Tag Manager',
      size: 'xxxlarge',
      tag: 'h1'
    } only %}
  {% endset %}

  {% include '@bolt-components-band/band.twig' with {
    theme: 'dark',
    size: 'large',
    content: header,
  } only %}

  <div class="c-ntm">
    {% include '@bolt-components-headline/headline.twig' with {
      text: 'Click the button below to open Notification Tag Manager (Step 3).',
      size: 'large',
      tag: 'h2'
    } only %}
    {{ modal_trigger }}
  </div>

  {% include '@bolt-components-modal/modal.twig' with {
    content: modal_content,
    width: 'full',
    spacing: 'none',
    attributes: {
      class: 'js-bolt-modal',
    },
  } only %}
<script>
  let switchButton = document.querySelectorAll(
    '.js-target-the-switch-button-container button[role="switch"]',
  ), i;

  for (i = 0; i < switchButton.length; ++i) {
    switchButton[i].addEventListener('click', e => {
      let el = e.target;
      let isChecked = el.getAttribute('aria-checked') === 'true';

      el.setAttribute('aria-checked', isChecked ? false : true);
    });
  }
</script>
{% endblock %}
